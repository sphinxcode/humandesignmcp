{
  "name": "Human Design Calculator (Railway)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "human-design",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "Webhook Trigger",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [240, 300],
      "webhookId": "human-design-railway",
      "notes": "Trigger –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤"
    },
    {
      "parameters": {
        "url": "={{ $env.RAILWAY_API_URL || 'https://your-project.up.railway.app' }}/api/human-design",
        "authentication": "none",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "birthDate",
              "value": "={{ $json.birthDate }}"
            },
            {
              "name": "birthTime",
              "value": "={{ $json.birthTime }}"
            },
            {
              "name": "birthLocation",
              "value": "={{ $json.birthLocation }}"
            }
          ]
        },
        "options": {
          "timeout": 10000
        }
      },
      "id": "railway-api-call",
      "name": "Call Railway API",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4,
      "position": [460, 300],
      "notes": "–í—ã–∑–æ–≤ Railway API –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Human Design"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [
            {
              "value1": "={{ $json.success }}",
              "value2": true
            }
          ]
        }
      },
      "id": "check-success",
      "name": "Check Success",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [680, 300]
    },
    {
      "parameters": {
        "jsCode": "// –ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏–∑ Railway response\nconst hdData = $input.item.json.data;\n\n// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\nconst message = `üéã **–í–∞—à Human Design:**\n\n` +\n`‚ú® **–¢–∏–ø:** ${hdData.type.ru_name || hdData.type.name}\n` +\n`üìù ${hdData.type.description || ''}\n\n` +\n`üéØ **–°—Ç—Ä–∞—Ç–µ–≥–∏—è:** ${hdData.strategy}\n\n` +\n`üí™ **–ê–≤—Ç–æ—Ä–∏—Ç–µ—Ç:** ${hdData.authority.ru_name || hdData.authority.name}\n` +\n`üìù ${hdData.authority.description || ''}\n\n` +\n`üìä **–ü—Ä–æ—Ñ–∏–ª—å:** ${hdData.profile.number}\n` +\n`üìù ${hdData.profile.description || ''}\n\n` +\n`üîÆ **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ—Ä–æ—Ç–∞:**\n` +\nhdData.gates.map(gate => \n  `‚Ä¢ **${gate.planet}**: –í–æ—Ä–æ—Ç–∞ ${gate.gate} (${gate.ru_name || gate.name}), –õ–∏–Ω–∏—è ${gate.line}`\n).join('\\n') +\n`\n\n---\n*–†–∞—Å—á–µ—Ç: ${hdData.calculationSource || '–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è'}*`;\n\nreturn {\n  json: {\n    success: true,\n    message: message,\n    rawData: hdData\n  }\n};"
      },
      "id": "format-response",
      "name": "Format Response",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 200]
    },
    {
      "parameters": {
        "jsCode": "// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏\nconst error = $input.item.json.error || 'Unknown error';\n\nreturn {\n  json: {\n    success: false,\n    message: `‚ùå –û—à–∏–±–∫–∞: ${error}`,\n    error: error\n  }\n};"
      },
      "id": "format-error",
      "name": "Format Error",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 400]
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json }}"
      },
      "id": "respond-to-webhook",
      "name": "Respond to Webhook",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [1120, 300],
      "notes": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∏–µ–Ω—Ç—É"
    }
  ],
  "connections": {
    "Webhook Trigger": {
      "main": [
        [
          {
            "node": "Call Railway API",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call Railway API": {
      "main": [
        [
          {
            "node": "Check Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Success": {
      "main": [
        [
          {
            "node": "Format Response",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Format Error",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Response": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format Error": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2024-01-01T00:00:00.000Z",
  "versionId": "1"
}

