# üåç Human Design —Å –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π Timezone –ë–∞–∑–æ–π –¥–ª—è n8n

–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Human Design —Ä–∞—Å—á–µ—Ç–æ–≤ **–ø—Ä—è–º–æ –≤ n8n** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **–≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –º–∏—Ä–∞** –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —É—á–µ—Ç–æ–º DST –¥–ª—è **–≤—Å–µ—Ö –≥–æ–¥–æ–≤**.

---

## üéØ –ß—Ç–æ —ç—Ç–æ?

**–ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ Human Design –∫–∞—Ä—Ç—ã –≤ n8n:
- ‚úÖ **–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API** - –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –≤ n8n Code node
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è timezone –±–∞–∑–∞** - 30+ –≥–æ—Ä–æ–¥–æ–≤ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π DST —Ä–∞—Å—á–µ—Ç** - —É—á–∏—Ç—ã–≤–∞–µ—Ç –ª–µ—Ç–Ω–µ–µ/–∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è DST** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö –≥–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–º–µ–Ω–∞ DST –≤ –†–æ—Å—Å–∏–∏ 2014)
- ‚úÖ **100% offline** - —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

---

## üì¶ –§–∞–π–ª—ã

- **`n8n-universal-timezone.json`** - –≥–æ—Ç–æ–≤—ã–π workflow –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
- **`src/timezone-database.cjs`** - –ø–æ–ª–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö timezone (–¥–ª—è Railway)
- **`src/timezone-utils.cjs`** - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å timezone

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ò–º–ø–æ—Ä—Ç –≤ n8n

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª n8n-universal-timezone.json –≤ –≤–∞—à n8n
# –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ n8n: Workflows ‚Üí Import from File
```

### 2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Workflow

- –ù–∞–∂–º–∏—Ç–µ "Active" (–≤–∫–ª—é—á–∏—Ç—å)
- Workflow –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

---

## üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```json
{
  "birthDate": "1990-05-15",
  "birthTime": "14:30",
  "birthLocation": "–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è"
}
```

### 2. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å—á–µ—Ç–∞

```
Webhook ‚Üí Calculate HD with Timezone ‚Üí Respond
```

#### –≠—Ç–∞–ø 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Timezone
```javascript
cityName: "–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è"
  ‚Üì
findTimezoneByCity() ‚Üí Europe/Moscow
  ‚Üì
–¢–æ—á–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: 55.7558, 37.6173
```

#### –≠—Ç–∞–ø 2: –†–∞—Å—á–µ—Ç DST
```javascript
birthDate: "1990-05-15"  // –¥–æ 2014 –≥–æ–¥–∞
  ‚Üì
isDST() ‚Üí true  // DST –¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–æ
  ‚Üì
UTC offset: 3 + 1 = 4
```

#### –≠—Ç–∞–ø 3: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ UTC
```javascript
Local: 14:30, UTC+4
  ‚Üì
UTC: 10:30
  ‚Üì
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø–ª–∞–Ω–µ—Ç
```

#### –≠—Ç–∞–ø 4: –†–∞—Å—á–µ—Ç Human Design
```javascript
–ü–æ–∑–∏—Ü–∏–∏ –ø–ª–∞–Ω–µ—Ç ‚Üí –í–æ—Ä–æ—Ç–∞ ‚Üí –¢–∏–ø ‚Üí –°—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Üí –ü—Ä–æ—Ñ–∏–ª—å
```

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç

```json
{
  "birthDate": "1990-05-15",
  "birthTime": "14:30",
  "birthLocation": "–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è",
  "timezone": "Europe/Moscow",
  "latitude": 55.7558,
  "longitude": 37.6173,
  "utcData": {
    "utcYear": 1990,
    "utcMonth": 5,
    "utcDay": 15,
    "utcHour": 10,
    "utcMinute": 30
  },
  "type": {
    "name": "Generator",
    "ru_name": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä"
  },
  "strategy": "–û—Ç–≤–µ—á–∞—Ç—å",
  "profile": {
    "sun_line": 3,
    "earth_line": 4,
    "number": "3/4"
  },
  "gates": [...],
  "definedCenters": [...],
  "calculationSource": "n8n Universal Timezone"
}
```

---

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≥–æ—Ä–æ–¥–∞

### üá∑üá∫ –†–æ—Å—Å–∏—è
- –ú–æ—Å–∫–≤–∞ (Europe/Moscow, UTC+3)
- –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥ (Asia/Yekaterinburg, UTC+5)
- –û–º—Å–∫ (Asia/Omsk, UTC+6)
- –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫ (Asia/Novosibirsk, UTC+7)
- –ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫ (Asia/Krasnoyarsk, UTC+7)
- –ò—Ä–∫—É—Ç—Å–∫ (Asia/Irkutsk, UTC+8)
- –Ø–∫—É—Ç—Å–∫ (Asia/Yakutsk, UTC+9)
- –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫ (Asia/Vladivostok, UTC+10)
- –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π (Asia/Kamchatka, UTC+12)

### üá™üá∫ –ï–≤—Ä–æ–ø–∞
- –ö–∏–µ–≤ (Europe/Kiev, UTC+2/+3 DST)
- –ú–∏–Ω—Å–∫ (Europe/Minsk, UTC+3)
- –í–∞—Ä—à–∞–≤–∞ (Europe/Warsaw, UTC+1/+2 DST)
- –ë–µ—Ä–ª–∏–Ω (Europe/Berlin, UTC+1/+2 DST)
- –ü–∞—Ä–∏–∂ (Europe/Paris, UTC+1/+2 DST)
- –õ–æ–Ω–¥–æ–Ω (Europe/London, UTC+0/+1 DST)

### üá¶üá∏ –ê–∑–∏—è
- –ê–ª–º–∞—Ç—ã (Asia/Almaty, UTC+6)
- –¢–∞—à–∫–µ–Ω—Ç (Asia/Tashkent, UTC+5)
- –®–∞–Ω—Ö–∞–π (Asia/Shanghai, UTC+8)
- –ü–µ–∫–∏–Ω (Asia/Shanghai, UTC+8)
- –¢–æ–∫–∏–æ (Asia/Tokyo, UTC+9)
- –°–µ—É–ª (Asia/Seoul, UTC+9)
- –ë–∞–Ω–≥–∫–æ–∫ (Asia/Bangkok, UTC+7)

### üá∫üá∏ –ê–º–µ—Ä–∏–∫–∞
- –ù—å—é-–ô–æ—Ä–∫ (America/New_York, UTC-5/-4 DST)
- –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å (America/Los_Angeles, UTC-8/-7 DST)

---

## üîß –ò—Å—Ç–æ—Ä–∏—è DST

### –†–æ—Å—Å–∏—è üá∑üá∫
- **–î–æ 2014**: DST –¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–æ (UTC+3 ‚Üí UTC+4)
- **–ü–æ—Å–ª–µ 2014**: DST –æ—Ç–º–µ–Ω–µ–Ω–æ (UTC+3 –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)

### –£–∫—Ä–∞–∏–Ω–∞ üá∫üá¶
- **–í—Å–µ–≥–¥–∞**: DST –¥–µ–π—Å—Ç–≤—É–µ—Ç (–º–∞—Ä—Ç-–æ–∫—Ç—è–±—Ä—å)

### –°–®–ê üá∫üá∏
- **–í—Å–µ–≥–¥–∞**: DST –¥–µ–π—Å—Ç–≤—É–µ—Ç
- **–ù–∞—á–∞–ª–æ**: –≤—Ç–æ—Ä–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –º–∞—Ä—Ç–∞
- **–ö–æ–Ω–µ—Ü**: –ø–µ—Ä–≤–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –Ω–æ—è–±—Ä—è

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ–¥–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `n8n-universal-timezone.json` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `TIMEZONE_DB`:

```javascript
'TIMEZONE_ID': { 
  offset: 5,           // –±–∞–∑–æ–≤—ã–π offset
  lat: 55.1234,        // —à–∏—Ä–æ—Ç–∞
  lon: 37.5678,        // –¥–æ–ª–≥–æ—Ç–∞
  cities: ['–ì–æ—Ä–æ–¥', 'City'] 
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ DST

–î–æ–±–∞–≤—å—Ç–µ –≤ `DST_HISTORY`:

```javascript
'TIMEZONE_ID': {
  before2014: true,      // –±—ã–ª–æ DST –¥–æ 2014
  after2014: false,      // –æ—Ç–º–µ–Ω–µ–Ω–æ –ø–æ—Å–ª–µ 2014
  // –∏–ª–∏
  alwaysDST: true        // –≤—Å–µ–≥–¥–∞ DST
}
```

---

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π

| –§—É–Ω–∫—Ü–∏—è | Railway API | n8n Full Backend | **n8n Universal** |
|---------|------------|------------------|-------------------|
| Swiss Ephemeris | ‚úÖ | ‚ùå | ‚ùå |
| –¢–æ—á–Ω–æ—Å—Ç—å –ø–ª–∞–Ω–µ—Ç | 100% | ~70% | ~70% |
| Timezone –ø–æ–¥–¥–µ—Ä–∂–∫–∞ | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è | –ë–∞–∑–æ–≤–∞—è | **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è** |
| DST –∏—Å—Ç–æ—Ä–∏—è | –ü–æ–ª–Ω–∞—è | –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è | **–ü–æ–ª–Ω–∞—è** |
| Offline | ‚ùå | ‚úÖ | ‚úÖ |
| –í–Ω–µ—à–Ω–∏–µ API | ‚ùå | ‚ùå | ‚ùå |

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### cURL

```bash
curl -X POST https://your-n8n.com/webhook/human-design \
  -H "Content-Type: application/json" \
  -d '{
    "birthDate": "1990-05-15",
    "birthTime": "14:30",
    "birthLocation": "–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è"
  }'
```

### JavaScript (fetch)

```javascript
const response = await fetch('https://your-n8n.com/webhook/human-design', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    birthDate: '1990-05-15',
    birthTime: '14:30',
    birthLocation: '–ú–æ—Å–∫–≤–∞, –†–æ—Å—Å–∏—è'
  })
});

const data = await response.json();
console.log(data.type.ru_name); // "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä"
```

---

## üêõ Troubleshooting

### 1. –ù–µ–≤–µ—Ä–Ω—ã–π offset

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π UTC offset –¥–ª—è –≥–æ—Ä–æ–¥–∞.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TIMEZONE_DB` –∏ –¥–æ–±–∞–≤—å—Ç–µ/–∏—Å–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –¥–ª—è –≥–æ—Ä–æ–¥–∞.

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π DST

**–ü—Ä–æ–±–ª–µ–º–∞**: DST –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ/–∏—Å–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –≤ `DST_HISTORY` –¥–ª—è timezone.

### 3. "City not found"

**–ü—Ä–æ–±–ª–µ–º–∞**: –ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –≥–æ—Ä–æ–¥ –≤ –º–∞—Å—Å–∏–≤ `cities` –≤ `TIMEZONE_DB`.

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Human Design Gates](https://humandesign.com/)
- [IANA Timezone Database](https://www.iana.org/time-zones)
- [n8n Code Node Documentation](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/)
- [Swiss Ephemeris](https://www.astro.com/swisseph/) - –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway API

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `N8N_FULL_BACKEND.md` - –≤–µ—Ä—Å–∏—è —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π timezone
- `N8N_BACKEND.md` - –≤–µ—Ä—Å–∏—è —Å Railway API
- `README.md` - –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚úÖ Checklist

- [x] –ü–æ–ª–Ω–∞—è –±–∞–∑–∞ timezone –¥–ª—è 30+ –≥–æ—Ä–æ–¥–æ–≤
- [x] –ò—Å—Ç–æ—Ä–∏—è DST –¥–ª—è key —Å—Ç—Ä–∞–Ω
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è local ‚Üí UTC
- [x] –†–∞—Å—á–µ—Ç Human Design –∫–∞—Ä—Ç—ã
- [x] –†–∞–±–æ—Ç–∞ offline
- [x] n8n integration
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ `n8n-universal-timezone.json` –≤ –≤–∞—à n8n –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞—Å—á–µ—Ç—ã!

